<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
 <title>Dublin Bikes</title>
 <style type="text/css">
   /* Always set the map height explicitly to define the size of the div
 * element that contains the map. */
#map {
  height: 80%;
}

/* Optional: Makes the sample page fill the window. */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}






</style>
 </head>
 <body>
<h3>
Dublin Bikes
</h3>
<div id='map'></div>
 <div id="root"></div>

<div class="row">
        <div class="input-field col s3">
          <input placeholder="1" id="station_filter" type="text" class="validate">
          <label for="station_filter">Station Filter</label>
        </div>
        <button onclick="look_up()">Lookup</button>
  </div>

  <script>
function look_up() {
  var station_id = document.getElementById("station_filter").value;
  console.log(station_id);
  $.ajax({
    url: "/station_id", 
    data:{'station_id': station_id},
    dataType: 'json',
    type:'POST',
    success: function(station){
      var station = station
      var new_div = `<div class="col s6 m4">
      <div class="card blue-grey darken-1">
        <center><span class="card-title white-text">Station ID: `+station.StationID+`</span></center>
        <div class="card-content white-text">
          <p>Address: `+station.address+`<p>
          <p>Total Bike Stands: `+station.bike_stands+`<p> 
          <p>Avaliable Bike Stands: `+station.available_bike_stands+`<p>  
          <p>Avaliable Bikes: `+station.available_bikes+`<p>
        </div>
        
      </div>
    </div>`;
      console.log(new_div);
      $('#station_details').html(new_div);
    }});
}
  </script>

<div id="station_details" class="row">
{% for station in stations %}

    <div class="col s6 m4">
      <div class="card blue-grey darken-1">
        <center><span class="card-title white-text">Station ID: {{station.StationID}}</span></center>
        <div class="card-content white-text">
          <p>Address: {{station.address}}<p>
          <p>Total Bike Stands: {{station.bike_stands}}<p> 
          <p>Avaliable Bike Stands: {{station.available_bike_stands}}<p>  
          <p>Avaliable Bikes: {{station.available_bikes}}<p>
        </div>
        
      </div>
    </div>


{% endfor %}
  </div>


    <script type="text/javascript">
        var map;
        function initMap() {
            map=new
         google.maps.Map(document.getElementById('map'), {
    center: {lat: 53.350140, lng: -6.266155},
    zoom: 11
  });
}


    </script>
    <script type="text/javascript"
        src="https://www.gstatic.com/charts/loader.js"></script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{ MAPS_APIKEY }}
&amp;callback=initMap"
        type="text/javascript">        
    </script>

  </body> 